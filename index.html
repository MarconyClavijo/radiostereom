<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Radio Stereo M 101.5 FM</title>

  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;700&display=swap" rel="stylesheet"/>

  <style>
    :root {
      --rojo:#e60000;
      --amarillo:#ffd700;
      --negro:#111;
      --blanco:#fff;
      --celeste:#0088cc;
      --footer:#222;
    }

    body{
      margin:0;
      font-family:'Raleway',sans-serif;
      background:linear-gradient(to bottom,var(--celeste),#f44336);
      color:var(--blanco);
    }

    header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:15px 20px;
      background:var(--amarillo);
      color:var(--negro);
      flex-wrap:wrap;
    }

    .logo-box{text-align:center}

    .logo{
      width:120px;
      animation:rebote 2s infinite;
    }

    .slogan{
      font-weight:bold;
      color:var(--rojo);
      margin-top:6px;
      animation:entrar 1.2s forwards;
    }

    .extra-img{
      width:280px;
      border-radius:15px;
      box-shadow:0 0 15px #e60000aa;
    }

    .main{
      display:flex;
      justify-content:center;
      gap:20px;
      padding:25px;
      flex-wrap:wrap;
    }

    .player-box{
      background:#fff;
      color:#000;
      border-radius:15px;
      padding:20px;
      max-width:420px;
      width:100%;
      text-align:center;
      box-shadow:0 0 15px #ffd700;
    }

    audio{
      width:100%;
      margin-top:10px;
    }

    .live{
      margin-top:10px;
      color:red;
      font-weight:bold;
      animation:blink 1s infinite;
    }

    .buttons{
      background:linear-gradient(to bottom right,#ffe066,#ff7b7b);
      padding:15px;
      border-radius:20px;
      display:flex;
      flex-direction:column;
      gap:12px;
      max-width:220px;
    }

    .buttons a{
      background:#fff;
      color:var(--rojo);
      padding:12px;
      text-decoration:none;
      border-radius:30px;
      font-weight:bold;
      text-align:center;
    }

    footer{
      background:var(--footer);
      text-align:center;
      padding:15px;
      font-size:14px;
      margin-top:30px;
      color:#ddd;
    }

    @keyframes rebote{
      0%,100%{transform:translateY(0)}
      50%{transform:translateY(-10px)}
    }
    @keyframes blink{
      50%{opacity:0}
    }
    @keyframes entrar{
      from{opacity:0;transform:translateY(20px)}
      to{opacity:1;transform:translateY(0)}
    }

    @media(max-width:768px){
      .extra-img{width:220px}
      .buttons{flex-direction:row;flex-wrap:wrap}
      .buttons a{flex:1 1 45%}
    }
  </style>
</head>

<body>

<header>
  <div class="logo-box">
    <img src="https://i.postimg.cc/L8bjb6K5/1687464033296.png" class="logo" alt="Stereo M">
    <div class="slogan">La Radio Pap√° üéôÔ∏è</div>
  </div>
  <img src="http://imgfz.com/i/xgID1Gn.jpeg" class="extra-img" alt="Stereo M">
</header>

<div class="main">

  <div class="player-box">
    <h2>üéß Esc√∫chanos en Vivo</h2>

    <!-- AUDIO -->
    <audio id="radioPlayer" controls preload="none"></audio>

    <div class="live">üî¥ EN VIVO</div>
    <div id="song-title">Cargando canci√≥n...</div>
  </div>

  <div class="buttons">
    <a href="https://play.google.com/store/apps/details?id=com.innovatel.radiostereom" target="_blank">üì≤ Descarga la App</a>
    <a href="https://www.facebook.com/share/1Dib9eQUFD/" target="_blank">üìò Facebook</a>
    <a href="https://wa.me/51984412853" target="_blank">üé§ WhatsApp Oyentes</a>
    <a href="https://wa.me/51942883375" target="_blank">üì¢ Publicidad</a>
  </div>

</div>

<footer>
  Dise√±o y desarrollo web por Marcony Clavijo | 942883375.
</footer>

<script>
  const player = document.getElementById("radioPlayer");
  const STREAM = "https://sonic.globalstream.pro/8108/stream";
  let pausedByUser = false;

  function connectLive() {
    player.src = STREAM + "?live=" + Date.now();
    player.load();
  }

  // conectar al cargar la p√°gina
  connectLive();

  // marcar pausa
  player.addEventListener("pause", () => {
    pausedByUser = true;
  });

  // al volver a play, reconectar al vivo
  player.addEventListener("play", () => {
    if (pausedByUser) {
      pausedByUser = false;
      connectLive();
      setTimeout(() => player.play(), 200);
    }
  });

  // ====== T√çTULO DE CANCI√ìN ======
  async function fetchSongTitle(){
    try{
      const proxy="https://api.allorigins.win/get?url=";
      const url=encodeURIComponent(
        "http://sonic.globalstream.pro:8108/stats?sid=1&json=1&nocache="+Date.now()
      );
      const res=await fetch(proxy+url);
      const data=await res.json();
      const parsed=JSON.parse(data.contents);
      document.getElementById("song-title").textContent =
        parsed.songtitle || "En transmisi√≥n...";
    }catch{
      document.getElementById("song-title").textContent="En transmisi√≥n...";
    }
  }

  fetchSongTitle();
  setInterval(fetchSongTitle,5000);
</script>

</body>
</html>
